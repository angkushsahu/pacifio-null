"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[827],{2827:function(a,e,n){n.r(e);var t=n(4942),r=n(1413),i=n(4165),l=n(5861),c=n(9439),s=n(2791),o=n(5985),u=n(6355),d=n(8119),m=n(4497),v=n(11),h=n(7143),f=n(337),p=n(8544),x=n(184);e.default=function(){var a=(0,f.CG)((function(a){return a.authSlice})).user,e=(0,f.TL)(),n=(0,h.yq)(),g=(0,c.Z)(n,2),j=g[0],b=g[1],Z=b.isLoading,A=b.isError,k=b.error,y=(0,s.useState)({avatar:"",email:"",name:"",deleteAvatar:!1}),C=(0,c.Z)(y,2),N=C[0],w=C[1],F=(0,s.useRef)(null),E=function(){var n=(0,l.Z)((0,i.Z)().mark((function n(t){var r,l,c,s,u;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),r=N.avatar,l=N.email,c=N.name,s=N.deleteAvatar,l&&c){n.next=5;break}return o.Am.warn("Please validate all the fields"),n.abrupt("return");case 5:if((0,m.Z)(l)){n.next=8;break}return o.Am.warn("E-mail format is not correct"),n.abrupt("return");case 8:if(n.prev=8,!((null===a||void 0===a?void 0:a.name)!==c||(null===a||void 0===a?void 0:a.email)!==l||null!==a&&void 0!==a&&a.pic&&s||r)){n.next=14;break}return n.next=12,j(N).unwrap();case 12:(u=n.sent).success&&(o.Am.success(u.message),e((0,p.av)({user:u.user})));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(8),o.Am.error(n.t0.data.message||"Unable to update your account");case 19:case"end":return n.stop()}}),n,null,[[8,16]])})));return function(a){return n.apply(this,arguments)}}();(0,s.useEffect)((function(){A&&o.Am.error(k.data.message)}),[A,k]),(0,s.useEffect)((function(){w({avatar:"",deleteAvatar:!1,email:(null===a||void 0===a?void 0:a.email)||"",name:(null===a||void 0===a?void 0:a.name)||""})}),[a]);var z=function(a){var e=a.target,n=e.name,i=e.value;w((0,r.Z)((0,r.Z)({},N),{},(0,t.Z)({},n,i)))};return(0,x.jsx)(x.Fragment,{children:Z?(0,x.jsx)(d.Z,{}):(0,x.jsxs)("main",{className:"form-container",children:[(0,x.jsx)("div",{className:"image-container",children:(0,x.jsx)("img",{src:v.Z,alt:"background",loading:"lazy"})}),(0,x.jsxs)("form",{onSubmit:E,children:[(0,x.jsx)("h1",{children:"Update Profile"}),(0,x.jsx)("label",{htmlFor:"avatar",className:"avatar-image--container",children:N.avatar||null!==a&&void 0!==a&&a.pic?(0,x.jsx)("img",{src:N.avatar?N.avatar:null===a||void 0===a?void 0:a.pic,alt:"avatar",loading:"lazy",title:"Change avatar",className:"avatar-image"}):(0,x.jsx)(u.m3W,{title:"Change avatar",className:"avatar-image"})}),(0,x.jsxs)("div",{className:"input-container",children:[(0,x.jsx)("label",{htmlFor:"name",children:"Enter your name"}),(0,x.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"e.g. John Doe",value:N.name,onChange:z})]}),(0,x.jsxs)("div",{className:"input-container",children:[(0,x.jsx)("label",{htmlFor:"email",children:"Enter your e-mail"}),(0,x.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"e.g. johndoe@gmail.com",value:N.email,onChange:z})]}),(0,x.jsxs)("div",{className:"input-container checkbox-container",children:[(0,x.jsx)("label",{htmlFor:"deleteAvatar",children:"Delete Avatar"}),(0,x.jsx)("input",{type:"checkbox",name:"deleteAvatar",id:"deleteAvatar",onChange:function(a){return w((0,r.Z)((0,r.Z)({},N),{},{deleteAvatar:a.target.checked}))}})]}),(0,x.jsxs)("div",{className:"input-container avatar-container",onClick:function(){var a;return null===(a=F.current)||void 0===a?void 0:a.click()},children:[(0,x.jsx)("label",{htmlFor:"avatar",children:"Change avatar"}),(0,x.jsx)("input",{type:"file",accept:"image/*",name:"avatar",id:"avatar",placeholder:"choose from your device",onChange:function(a){var e=a.target.files[0];if(e){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){w((0,r.Z)((0,r.Z)({},N),{},{avatar:String(n.result)}))}}},ref:F})]}),(0,x.jsx)("button",{type:"submit",disabled:Z,children:"Update"})]})]})})}},4497:function(a,e){e.Z=function(a){return a.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}}}]);
//# sourceMappingURL=827.71a30758.chunk.js.map