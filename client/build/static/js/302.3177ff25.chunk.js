(self.webpackChunkclient=self.webpackChunkclient||[]).push([[302],{6595:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r={status_container:"styles_status_container__ISRYd",status:"styles_status__TWH6x",active:"styles_active__Ai8fo"},a=n(4353),o=n(7689),s=n(6856),c=n(9126),i=n(5763),u=n(184),l=function(){var e=(0,o.TH)().pathname,t=e.includes(a.Z.confirmOrder),n=e.includes(a.Z.shipping),l=e.includes(a.Z.payment);return(0,u.jsxs)("section",{className:r.status_container,children:[(0,u.jsxs)("div",{className:"".concat(r.status," ").concat(n?r.active:""),children:[(0,u.jsx)(s.ili,{}),(0,u.jsx)("p",{children:"Shipping Details"})]}),(0,u.jsx)(c.lzl,{className:r.arrow}),(0,u.jsxs)("div",{className:"".concat(r.status," ").concat(t?r.active:""),children:[(0,u.jsx)(i.Aju,{}),(0,u.jsx)("p",{children:"Order Confirmation"})]}),(0,u.jsx)(c.lzl,{className:r.arrow}),(0,u.jsxs)("div",{className:"".concat(r.status," ").concat(l?r.active:""),children:[(0,u.jsx)(c.JuZ,{}),(0,u.jsx)("p",{children:"Payment"})]})]})}},8302:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r="styles_payment__xF1py",a="styles_payment_form__Wp5Vc",o="styles_input_container__cHM7t",s=n(2791),c=n(6595),i=n(7689),u=n(4353),l=n(337),p=n(4165),f=n(5861),m=n(9439),d=n(5764),y=n(5985),h=n(7143),v=n(8544),g=n(8119),b=n(184),E=function(){var e=(0,d.useStripe)(),t=(0,d.useElements)(),n=(0,h.LS)(),r=(0,m.Z)(n,2),s=r[0],c=r[1].isLoading,E=(0,h.kD)(),C=(0,m.Z)(E,2),j=C[0],x=C[1].isLoading,S=(0,h.vF)(),k=(0,m.Z)(S,2),O=k[0],_=k[1].isLoading,w=(0,l.CG)((function(e){return e.authSlice})).user,P=(0,l.CG)((function(e){return e.processOrderSlice})).order,A=(0,l.TL)(),N=(0,i.s0)(),I=P.amount,T=function(){var n=(0,f.Z)((0,p.Z)().mark((function n(r){var a,o,c,i,l,f,m,h;return(0,p.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,n.next=4,s({amount:100*I}).unwrap();case 4:if((a=n.sent).success){n.next=8;break}return y.Am.error(a.message),n.abrupt("return");case 8:if(o=a.clientSecret,e&&t){n.next=11;break}return n.abrupt("return");case 11:return n.next=13,e.confirmCardPayment(o,{payment_method:{card:t.getElement(d.CardNumberElement),billing_details:{name:null===w||void 0===w?void 0:w.name,email:null===w||void 0===w?void 0:w.email}}});case 13:if(!(c=n.sent).error){n.next=19;break}return y.Am.error(c.error.message),n.abrupt("return");case 19:if("succeeded"!==c.paymentIntent.status){n.next=31;break}return i=c.paymentIntent,l=i.id,f=i.status,A((0,v.Pj)({id:l,status:f})),m=P.shippingInfo,n.next=25,j({paymentInfo:{id:l,status:f},shippingInfo:m}).unwrap();case 25:return(h=n.sent).success?y.Am.success(h.message):y.Am.error(h.message),n.next=29,O().unwrap();case 29:n.sent.success&&N(u.Z.orderSuccess,{replace:!0});case 31:n.next=36;break;case 33:n.prev=33,n.t0=n.catch(1),y.Am.error(n.t0.data.message||"Unable to process payment");case 36:case"end":return n.stop()}}),n,null,[[1,33]])})));return function(e){return n.apply(this,arguments)}}(),B={style:{base:{color:"#ffffff",fontSize:"1.2rem"},invalid:{color:"#ff6666"}}};return c||x||_?(0,b.jsx)(g.Z,{}):(0,b.jsxs)("form",{onSubmit:T,className:a,children:[(0,b.jsxs)("div",{className:o,children:[(0,b.jsx)("label",{htmlFor:"",children:"Enter card number"}),(0,b.jsx)(d.CardNumberElement,{options:B})]}),(0,b.jsxs)("div",{className:o,children:[(0,b.jsx)("label",{htmlFor:"",children:"Enter card expiry date"}),(0,b.jsx)(d.CardExpiryElement,{options:B})]}),(0,b.jsxs)("div",{className:o,children:[(0,b.jsx)("label",{htmlFor:"",children:"Enter card CVC"}),(0,b.jsx)(d.CardCvcElement,{options:B})]}),(0,b.jsxs)("button",{type:"submit",title:"Make Payment",disabled:c,children:["Pay \u20b9 ",I,".00"]})]})},C=function(){var e=(0,i.s0)(),t=(0,l.CG)((function(e){return e.stripeKeySlice})).stripeKey,n=(0,l.CG)((function(e){return e.processOrderSlice})).order;return(0,s.useEffect)((function(){var t=n.amount;n.shippingInfo.length||e(u.Z.shipping,{replace:!0}),t||e(u.Z.confirmOrder,{replace:!0})}),[n,e]),t?(0,b.jsxs)("section",{className:r,children:[(0,b.jsx)(c.Z,{}),(0,b.jsx)("h1",{className:"text-center",children:"Payment"}),(0,b.jsx)(E,{})]}):(0,b.jsx)(i.Fg,{to:u.Z.confirmOrder,replace:!0})}},5764:function(e,t,n){!function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return c(e)||i(e,t)||u(e,t)||p()}function c(e){if(Array.isArray(e))return e}function i(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,a,o=[],s=!0,c=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(i){c=!0,a=i}finally{try{s||null==n.return||n.return()}finally{if(c)throw a}}return o}}function u(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){return e(t={exports:{}},t.exports),t.exports}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var m="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function d(){}function y(){}y.resetWarningCache=d;var h=function(){function e(e,t,n,r,a,o){if(o!==m){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:y,resetWarningCache:d};return n.PropTypes=n,n},v=f((function(e){e.exports=h()})),g=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},b=function(e){return null!==e&&"object"===a(e)},E=function(e){return b(e)&&"function"===typeof e.then},C=function(e){return b(e)&&"function"===typeof e.elements&&"function"===typeof e.createToken&&"function"===typeof e.createPaymentMethod&&"function"===typeof e.confirmCardPayment},j="[object Object]",x=function e(t,n){if(!b(t)||!b(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var a=Object.prototype.toString.call(t)===j;if(a!==(Object.prototype.toString.call(n)===j))return!1;if(!a&&!r)return t===n;var o=Object.keys(t),s=Object.keys(n);if(o.length!==s.length)return!1;for(var c={},i=0;i<o.length;i+=1)c[o[i]]=!0;for(var u=0;u<s.length;u+=1)c[s[u]]=!0;var l=Object.keys(c);if(l.length!==o.length)return!1;var p=t,f=n,m=function(t){return e(p[t],f[t])};return l.every(m)},S=function(e,t,n){return b(e)?Object.keys(e).reduce((function(a,s){var c=!b(t)||!x(e[s],t[s]);return n.includes(s)?(c&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),a):c?r(r({},a||{}),{},o({},s,e[s])):a}),null):null},k="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",O=function(e){if(null===e||C(e))return e;throw new Error(k)},_=function(e){if(E(e))return{tag:"async",stripePromise:Promise.resolve(e).then(O)};var t=O(e);return null===t?{tag:"empty"}:{tag:"sync",stripe:t}},w=t.createContext(null);w.displayName="ElementsContext";var P=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},A=t.createContext(null);A.displayName="CartElementContext";var N=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},I=function(e){var n=e.stripe,r=e.options,a=e.children,o=t.useMemo((function(){return _(n)}),[n]),c=s(t.useState(null),2),i=c[0],u=c[1],l=s(t.useState(null),2),p=l[0],f=l[1],m=s(t.useState((function(){return{stripe:"sync"===o.tag?o.stripe:null,elements:"sync"===o.tag?o.stripe.elements(r):null}})),2),d=m[0],y=m[1];t.useEffect((function(){var e=!0,t=function(e){y((function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}}))};return"async"!==o.tag||d.stripe?"sync"!==o.tag||d.stripe||t(o.stripe):o.stripePromise.then((function(n){n&&e&&t(n)})),function(){e=!1}}),[o,d,r]);var h=g(n);t.useEffect((function(){null!==h&&h!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")}),[h,n]);var v=g(r);return t.useEffect((function(){if(d.elements){var e=S(r,v,["clientSecret","fonts"]);e&&d.elements.update(e)}}),[r,v,d.elements]),t.useEffect((function(){var e=d.stripe;e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"1.16.3"}),e.registerAppInfo({name:"react-stripe-js",version:"1.16.3",url:"https://stripe.com/docs/stripe-js/react"}))}),[d.stripe]),t.createElement(w.Provider,{value:d},t.createElement(A.Provider,{value:{cart:i,setCart:u,cartState:p,setCartState:f}},a))};I.propTypes={stripe:v.any,options:v.object};var T=function(e){var n=t.useContext(w);return P(n,e)},B=function(e){var n=t.useContext(A);return N(n,e)},R=function(){return T("calls useElements()").elements},Z=function(){return T("calls useStripe()").stripe},L=function(){return B("calls useCartElement()").cart},M=function(){return B("calls useCartElementState()").cartState},F=function(e){return(0,e.children)(T("mounts <ElementsConsumer>"))};F.propTypes={children:v.func.isRequired};var D=function(e,n,r){var a=!!r,o=t.useRef(r);t.useEffect((function(){o.current=r}),[r]),t.useEffect((function(){if(!a||!e)return function(){};var t=function(){o.current&&o.current.apply(o,arguments)};return e.on(n,t),function(){e.off(n,t)}}),[a,n,e,o])},W=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},U=function(e,n){var r="".concat(W(e),"Element"),a=n?function(e){T("mounts <".concat(r,">")),B("mounts <".concat(r,">"));var n=e.id,a=e.className;return t.createElement("div",{id:n,className:a})}:function(n){var a,o=n.id,c=n.className,i=n.options,u=void 0===i?{}:i,l=n.onBlur,p=n.onFocus,f=n.onReady,m=n.onChange,d=n.onEscape,y=n.onClick,h=n.onLoadError,v=n.onLoaderStart,b=n.onNetworksChange,E=n.onCheckout,C=n.onLineItemClick,j=n.onConfirm,x=n.onCancel,k=n.onShippingAddressChange,O=n.onShippingRateChange,_=T("mounts <".concat(r,">")).elements,w=s(t.useState(null),2),P=w[0],A=w[1],N=t.useRef(null),I=B("mounts <".concat(r,">")),R=I.setCart,Z=I.setCartState;D(P,"blur",l),D(P,"focus",p),D(P,"escape",d),D(P,"click",y),D(P,"loaderror",h),D(P,"loaderstart",v),D(P,"networkschange",b),D(P,"lineitemclick",C),D(P,"confirm",j),D(P,"cancel",x),D(P,"shippingaddresschange",k),D(P,"shippingratechange",O),"cart"===e?a=function(e){Z(e),f&&f(e)}:f&&(a="payButton"===e?f:function(){f(P)}),D(P,"ready",a),D(P,"change","cart"===e?function(e){Z(e),m&&m(e)}:m),D(P,"checkout","cart"===e?function(e){Z(e),E&&E(e)}:E),t.useLayoutEffect((function(){if(null===P&&_&&null!==N.current){var t=_.create(e,u);"cart"===e&&R&&R(t),A(t),t.mount(N.current)}}),[P,_,u,R]);var L=g(u);return t.useEffect((function(){if(P){var e=S(u,L,["paymentRequest"]);e&&P.update(e)}}),[u,L,P]),t.useLayoutEffect((function(){return function(){P&&P.destroy()}}),[P]),t.createElement("div",{id:o,className:c,ref:N})};return a.propTypes={id:v.string,className:v.string,onChange:v.func,onBlur:v.func,onFocus:v.func,onReady:v.func,onEscape:v.func,onClick:v.func,onLoadError:v.func,onLoaderStart:v.func,onNetworksChange:v.func,onCheckout:v.func,onLineItemClick:v.func,onConfirm:v.func,onCancel:v.func,onShippingAddressChange:v.func,onShippingRateChange:v.func,options:v.object},a.displayName=r,a.__elementType=e,a},q="undefined"===typeof window,Y=U("auBankAccount",q),G=U("card",q),H=U("cardNumber",q),z=U("cardExpiry",q),V=U("cardCvc",q),K=U("fpxBank",q),J=U("iban",q),$=U("idealBank",q),Q=U("p24Bank",q),X=U("epsBank",q),ee=U("payment",q),te=U("payButton",q),ne=U("paymentRequestButton",q),re=U("linkAuthentication",q),ae=U("address",q),oe=U("shippingAddress",q),se=U("cart",q),ce=U("paymentMethodMessaging",q),ie=U("affirmMessage",q),ue=U("afterpayClearpayMessage",q);e.AddressElement=ae,e.AffirmMessageElement=ie,e.AfterpayClearpayMessageElement=ue,e.AuBankAccountElement=Y,e.CardCvcElement=V,e.CardElement=G,e.CardExpiryElement=z,e.CardNumberElement=H,e.CartElement=se,e.Elements=I,e.ElementsConsumer=F,e.EpsBankElement=X,e.FpxBankElement=K,e.IbanElement=J,e.IdealBankElement=$,e.LinkAuthenticationElement=re,e.P24BankElement=Q,e.PayButtonElement=te,e.PaymentElement=ee,e.PaymentMethodMessagingElement=ce,e.PaymentRequestButtonElement=ne,e.ShippingAddressElement=oe,e.useCartElement=L,e.useCartElementState=M,e.useElements=R,e.useStripe=Z,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(2791))}}]);
//# sourceMappingURL=302.3177ff25.chunk.js.map